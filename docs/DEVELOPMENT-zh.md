
# å¼€å‘æŒ‡å— (Development Guide)

æœ¬æ–‡æ¡£æ˜¯ **Anthropic OpenAI Bridge** çš„è¯¦ç»†å¼€å‘æŒ‡å—ï¼Œé¢å‘æƒ³è¦å‚ä¸é¡¹ç›®å¼€å‘ã€ç»´æŠ¤æˆ–æ‰©å±•çš„å¼€å‘è€…ã€‚

## ç›®å½•

- [é¡¹ç›®æ¶æ„](#é¡¹ç›®æ¶æ„)
- [å¼€å‘ç¯å¢ƒæ­å»º](#å¼€å‘ç¯å¢ƒæ­å»º)
- [ä»£ç è§„èŒƒ](#ä»£ç è§„èŒƒ)
- [é¡¹ç›®ç»“æ„è¯¦è§£](#é¡¹ç›®ç»“æ„è¯¦è§£)
- [æ ¸å¿ƒæµç¨‹](#æ ¸å¿ƒæµç¨‹)
- [è°ƒè¯•æŒ‡å—](#è°ƒè¯•æŒ‡å—)
- [æ·»åŠ æ–°åŠŸèƒ½](#æ·»åŠ æ–°åŠŸèƒ½)
- [æ•°æ®åº“ç®¡ç†](#æ•°æ®åº“ç®¡ç†)
- [æµ‹è¯•](#æµ‹è¯•)
- [éƒ¨ç½²æŒ‡å—](#éƒ¨ç½²æŒ‡å—)
- [API æ–‡æ¡£](#api-æ–‡æ¡£)
- [æ•…éšœæ’æŸ¥](#æ•…éšœæ’æŸ¥)
- [è´¡çŒ®æŒ‡å—](#è´¡çŒ®æŒ‡å—)

---

## ğŸ—ï¸ é¡¹ç›®æ¶æ„

### æ•´ä½“æ¶æ„å›¾

```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚                        Claude Code                           â”‚
â”‚                   (å®¢æˆ·ç«¯ / CLI å·¥å…·)                         â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
                         â”‚
                         â–¼
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚              Anthropic OpenAI Bridge                         â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚    å‰ç«¯ (Frontend)   â”‚            åç«¯ (Backend)              â”‚
â”‚                     â”‚                                       â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”  â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”  â”‚
â”‚  â”‚  Svelte 5     â”‚  â”‚  â”‚     FastAPI + Uvicorn          â”‚  â”‚
â”‚  â”‚  TypeScript   â”‚  â”‚  â”‚                                 â”‚  â”‚
â”‚  â”‚  PWA          â”‚  â”‚  â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”  â”‚  â”‚
â”‚  â”‚               â”‚  â”‚  â”‚  â”‚   API è·¯ç”±å±‚              â”‚  â”‚  â”‚
â”‚  â”‚  - èŠå¤©ç•Œé¢   â”‚  â”‚  â”‚  â”‚  - /v1/messages           â”‚  â”‚  â”‚
â”‚  â”‚  - ç®¡ç†é¢æ¿   â”‚  â”‚  â”‚  â”‚  - /api/providers         â”‚  â”‚  â”‚
â”‚  â”‚  - å¥åº·ç›‘æ§   â”‚  â”‚  â”‚  â”‚  - /api/health            â”‚  â”‚  â”‚
â”‚  â”‚  - è®¾ç½®é¡µé¢   â”‚  â”‚  â”‚  â”‚  - /api/stats             â”‚  â”‚  â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜  â”‚  â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜  â”‚  â”‚
â”‚                     â”‚  â”‚                                 â”‚  â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”  â”‚  â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”  â”‚  â”‚
â”‚  â”‚   WebSocket   â”‚  â”‚  â”‚  â”‚    æœåŠ¡å±‚ (Services)      â”‚  â”‚  â”‚
â”‚  â”‚   å®æ—¶é€šä¿¡    â”‚  â”‚  â”‚  â”‚                           â”‚  â”‚  â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜  â”‚  â”‚  â”‚  - MessageService         â”‚  â”‚  â”‚
â”‚                     â”‚  â”‚  â”‚  - ProviderService        â”‚  â”‚  â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”´â”€â”€â”´â”€â”€â”´â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”´â”€â”€â”˜
                        â”‚                                   â”‚
                        â–¼                                   â–¼
              â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”                  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
              â”‚   æµè§ˆå™¨å­˜å‚¨    â”‚                  â”‚    æ•°æ®å±‚        â”‚
              â”‚   (localStorage)â”‚                  â”‚                  â”‚
              â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜                  â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â” â”‚
                                                 â”‚  â”‚ SQLite DB  â”‚ â”‚
                                                 â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜ â”‚
                                                 â”‚                  â”‚
                                                 â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â” â”‚
                                                 â”‚  â”‚ è¿æ¥æ± ç®¡ç†  â”‚ â”‚
                                                 â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜ â”‚
                                                 â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

### åç«¯æ¶æ„ (Backend)

åç«¯åŸºäº **FastAPI** æ¡†æ¶ï¼Œé‡‡ç”¨åˆ†å±‚æ¶æ„è®¾è®¡ï¼š

#### ç›®å½•ç»“æ„

```
backend/app/
â”œâ”€â”€ routes/                  # API è·¯ç”±
â”‚   â”œâ”€â”€ messages.py          # æ¶ˆæ¯ APIï¼ˆå…¼å®¹ Anthropicï¼‰
â”‚   â”œâ”€â”€ health.py            # å¥åº·æ£€æŸ¥è·¯ç”±
â”‚   â”œâ”€â”€ auth.py              # è®¤è¯è·¯ç”±
â”‚   â”œâ”€â”€ oauth.py             # OAuth è·¯ç”±
â”‚   â””â”€â”€ ...
â”œâ”€â”€ services/                # ä¸šåŠ¡é€»è¾‘å±‚
â”‚   â”œâ”€â”€ message_service.py   # æ¶ˆæ¯å¤„ç†
â”‚   â”œâ”€â”€ provider_service.py  # ä¾›åº”å•†ç®¡ç†
â”‚   â”œâ”€â”€ auth_service.py      # è®¤è¯æœåŠ¡
â”‚   â”œâ”€â”€ health_service.py    # å¥åº·ç›‘æ§
â”‚   â”œâ”€â”€ token_counter.py     # Token è®¡æ•°
â”‚   â””â”€â”€ ...
â”œâ”€â”€ converters/              # æ ¼å¼è½¬æ¢å™¨
â”‚   â”œâ”€â”€ anthropic_to_openai.py
â”‚   â”œâ”€â”€ openai_to_anthropic.py
â”‚   â””â”€â”€ streaming_format.py
â”œâ”€â”€ infrastructure/          # åŸºç¡€è®¾æ–½æœåŠ¡
â”‚   â”œâ”€â”€ cache.py             # å†…å­˜/Redis ç¼“å­˜
â”‚   â””â”€â”€ telemetry.py         # OpenTelemetry é›†æˆ
â”œâ”€â”€ database/                # æ•°æ®è®¿é—®å±‚ï¼ˆå¼‚æ­¥ SQLiteï¼‰
â”‚   â”œâ”€â”€ core.py              # æ•°æ®åº“è¿æ¥å’Œ schema
â”‚   â”œâ”€â”€ users.py             # ç”¨æˆ·ç®¡ç†
â”‚   â”œâ”€â”€ api_keys.py          # API Key å­˜å‚¨
â”‚   â”œâ”€â”€ conversations.py     # å¯¹è¯å’Œæ¶ˆæ¯
â”‚   â”œâ”€â”€ request_logs.py      # è¯·æ±‚æ—¥å¿—
â”‚   â”œâ”€â”€ token_usage.py       # Token ä½¿ç”¨ç»Ÿè®¡
â”‚   â”œâ”€â”€ health_history.py    # å¥åº·å†å²
â”‚   â”œâ”€â”€ config_changes.py    # é…ç½®å˜æ›´å†å²
â”‚   â”œâ”€â”€ oauth_accounts.py    # OAuth è´¦æˆ·å…³è”
â”‚   â””â”€â”€ encryption.py        # åŠ å¯†å·¥å…·
â”œâ”€â”€ utils/                   # å·¥å…·å‡½æ•°
â”‚   â”œâ”€â”€ token_extractor.py   # ç»Ÿä¸€ Token æå–ï¼ˆæ”¯æŒ OpenAI/Anthropicï¼‰
â”‚   â”œâ”€â”€ security_utils.py    # åŠ å¯†ã€éªŒè¯ã€API Key è„±æ•
â”‚   â”œâ”€â”€ color_logger.py      # å½©è‰²æ—¥å¿—
â”‚   â”œâ”€â”€ error_handler.py     # é”™è¯¯å“åº”æ ¼å¼åŒ–
â”‚   â””â”€â”€ response.py          # å“åº”å·¥å…·
â””â”€â”€ encryption_key.py        # åŠ å¯†å¯†é’¥ç®¡ç†
```

#### æ ¸å¿ƒç»„ä»¶

**1. API å±‚ (`/api/`)**
- æš´éœ² RESTful API ç«¯ç‚¹
- å¤„ç† HTTP è¯·æ±‚/å“åº”
- éªŒè¯è¯·æ±‚å‚æ•°
- JWT è®¤è¯

**2. æœåŠ¡å±‚ (`/services/`)**
- ä¸šåŠ¡é€»è¾‘å¤„ç†
- ä¾›åº”å•†è¯·æ±‚è½¬å‘
- æ•…éšœè½¬ç§»å¤„ç†
- å¹¶å‘æ§åˆ¶

**3. æ•°æ®å±‚ (`/database/`)**
- SQLite æ•°æ®åº“ + è¿æ¥æ± 
- å¼‚æ­¥æ•°æ®è®¿é—®
- æ•°æ®åŠ å¯†å­˜å‚¨
- è¯·æ±‚æ—¥å¿—è®°å½•

**4. è½¬æ¢å±‚ (`/converters/`)**
- Anthropic â†” OpenAI æ ¼å¼è½¬æ¢
- æµå¼å“åº”å¤„ç†
- å·¥å…·è°ƒç”¨æ ¼å¼è½¬æ¢

### å‰ç«¯æ¶æ„ (Frontend)

å‰ç«¯åŸºäº **Svelte 5** æ¡†æ¶ï¼Œé‡‡ç”¨ç°ä»£åŒ–å“åº”å¼è®¾è®¡ï¼š

#### ç›®å½•ç»“æ„

```
frontend/src/
â”œâ”€â”€ lib/
â”‚   â”œâ”€â”€ components/            # å¯å¤ç”¨çš„ Svelte ç»„ä»¶
â”‚   â”‚   â”œâ”€â”€ chat/              # èŠå¤©ç›¸å…³ç»„ä»¶ï¼ˆChatAreaã€MessageBubble ç­‰ï¼‰
â”‚   â”‚   â”œâ”€â”€ layout/            # å¸ƒå±€ç»„ä»¶ï¼ˆHeaderã€MobileNavï¼‰
â”‚   â”‚   â”œâ”€â”€ providers/         # ä¾›åº”å•†ç®¡ç†ç»„ä»¶
â”‚   â”‚   â”œâ”€â”€ settings/          # è®¾ç½®ç»„ä»¶
â”‚   â”‚   â”œâ”€â”€ ui/                # åŸºç¡€ UI ç»„ä»¶ï¼ˆButtonã€Inputã€Card ç­‰ï¼‰
â”‚   â”‚   â”œâ”€â”€ i18n/              # å›½é™…åŒ–ç»„ä»¶ï¼ˆTranslateï¼‰
â”‚   â”‚   â”œâ”€â”€ ErrorMessageModal.svelte
â”‚   â”‚   â”œâ”€â”€ Pagination.svelte
â”‚   â”‚   â”œâ”€â”€ ProviderForm.svelte
â”‚   â”‚   â”œâ”€â”€ SettingsModal.svelte
â”‚   â”‚   â”œâ”€â”€ WelcomeModal.svelte
â”‚   â”‚   â””â”€â”€ OAuthIcon.svelte
â”‚   â”œâ”€â”€ services/              # API å®¢æˆ·ç«¯æœåŠ¡
â”‚   â”‚   â”œâ”€â”€ api.ts             # ä¸» API å®¢æˆ·ç«¯
â”‚   â”‚   â”œâ”€â”€ chatService.ts     # èŠå¤©æœåŠ¡
â”‚   â”‚   â”œâ”€â”€ auth.ts            # è®¤è¯æœåŠ¡
â”‚   â”‚   â”œâ”€â”€ permissions.ts     # æƒé™ç®¡ç†æœåŠ¡
â”‚   â”‚   â”œâ”€â”€ oauthProviders.ts  # OAuth ä¾›åº”å•†é…ç½®
â”‚   â”‚   â”œâ”€â”€ apiKeys.ts         # API Key æœåŠ¡
â”‚   â”‚   â”œâ”€â”€ apiKeyStorage.ts   # å®‰å…¨ API Key å­˜å‚¨
â”‚   â”‚   â”œâ”€â”€ providers.ts       # ä¾›åº”å•†æœåŠ¡
â”‚   â”‚   â”œâ”€â”€ health.ts          # å¥åº·ç›‘æ§æœåŠ¡
â”‚   â”‚   â”œâ”€â”€ stats.ts           # ç»Ÿè®¡æœåŠ¡
â”‚   â”‚   â”œâ”€â”€ config.ts          # é…ç½®æœåŠ¡
â”‚   â”‚   â””â”€â”€ preferences.ts     # ç”¨æˆ·åå¥½æœåŠ¡
â”‚   â”œâ”€â”€ stores/                # Svelte storeï¼ˆSvelte 5 $stateï¼‰
â”‚   â”‚   â”œâ”€â”€ auth.svelte.ts     # è®¤è¯çŠ¶æ€
â”‚   â”‚   â”œâ”€â”€ chatSession.ts     # èŠå¤©ä¼šè¯çŠ¶æ€
â”‚   â”‚   â”œâ”€â”€ providers.ts       # ä¾›åº”å•†çŠ¶æ€
â”‚   â”‚   â”œâ”€â”€ health.ts          # å¥åº·çŠ¶æ€
â”‚   â”‚   â”œâ”€â”€ language.ts        # å›½é™…åŒ–çŠ¶æ€
â”‚   â”‚   â”œâ”€â”€ theme.ts           # ä¸»é¢˜çŠ¶æ€
â”‚   â”‚   â”œâ”€â”€ toast.ts           # æç¤ºæ¶ˆæ¯çŠ¶æ€
â”‚   â”‚   â””â”€â”€ config.ts          # é…ç½®çŠ¶æ€
â”‚   â”œâ”€â”€ types/                 # TypeScript ç±»å‹å®šä¹‰
â”‚   â”‚   â”œâ”€â”€ permission.ts      # æƒé™ç±»å‹
â”‚   â”‚   â”œâ”€â”€ apiKey.ts          # API Key ç±»å‹
â”‚   â”‚   â”œâ”€â”€ provider.ts        # ä¾›åº”å•†ç±»å‹
â”‚   â”‚   â”œâ”€â”€ health.ts          # å¥åº·ç±»å‹
â”‚   â”‚   â”œâ”€â”€ config.ts          # é…ç½®ç±»å‹
â”‚   â”‚   â””â”€â”€ language.ts        # è¯­è¨€ç±»å‹
â”‚   â”œâ”€â”€ config/                # é…ç½®æ–‡ä»¶
â”‚   â”‚   â””â”€â”€ keyboardShortcuts.ts  # é”®ç›˜å¿«æ·é”®
â”‚   â”œâ”€â”€ utils/                 # å·¥å…·å‡½æ•°
â”‚   â”‚   â”œâ”€â”€ gesture.ts         # æ‰‹åŠ¿æ£€æµ‹
â”‚   â”‚   â””â”€â”€ session.ts         # ä¼šè¯ç®¡ç†
â”‚   â””â”€â”€ i18n/                  # å›½é™…åŒ–èµ„æºï¼ˆ16 ç§è¯­è¨€ï¼‰
â”œâ”€â”€ routes/                    # SvelteKit é¡µé¢
â”‚   â”œâ”€â”€ +layout.svelte         # æ ¹å¸ƒå±€ï¼ˆè®¤è¯å’Œæƒé™æ£€æŸ¥ï¼‰
â”‚   â”œâ”€â”€ +page.svelte           # é¦–é¡µ
â”‚   â”œâ”€â”€ login/                 # ç™»å½•é¡µï¼ˆé‚®ç®± + OAuthï¼‰
â”‚   â”‚   â””â”€â”€ +page.ts
â”‚   â”œâ”€â”€ chat/                  # èŠå¤©é¡µé¢
â”‚   â”œâ”€â”€ providers/             # ä¾›åº”å•†ç®¡ç†
â”‚   â”œâ”€â”€ api-keys/              # API Key ç®¡ç†
â”‚   â”œâ”€â”€ health/                # å¥åº·ç›‘æ§
â”‚   â”œâ”€â”€ stats/                 # ä½¿ç”¨ç»Ÿè®¡
â”‚   â”œâ”€â”€ config/                # ç³»ç»Ÿé…ç½®
â”‚   â”œâ”€â”€ admin/
â”‚   â”‚   â””â”€â”€ users/             # ç”¨æˆ·ç®¡ç†
â”‚   â”‚       â”œâ”€â”€ +page.svelte   # ç”¨æˆ·åˆ—è¡¨
â”‚   â”‚       â””â”€â”€ [id]/          # ç”¨æˆ·è¯¦æƒ…å’Œæƒé™é…ç½®
â”‚   â””â”€â”€ oauth/
â”‚       â””â”€â”€ [provider]/        # OAuth å›è°ƒå¤„ç†
â”‚           â””â”€â”€ callback/      # OAuth å›è°ƒé¡µé¢
â””â”€â”€ app.html                   # HTML æ¨¡æ¿
```

#### æ ¸å¿ƒç‰¹æ€§

**1. å“åº”å¼çŠ¶æ€ç®¡ç†**
- Svelte 5 åŸç”Ÿ `$state()` å’Œ `$derived()`
- å¯ç»„åˆçš„çŠ¶æ€ç®¡ç†ï¼ˆç±»ä¼¼ React hooksï¼‰
- ç»†ç²’åº¦å“åº”å¼æ›´æ–°

**2. æœåŠ¡å±‚æ¶æ„**
- ç»Ÿä¸€çš„ API å®¢æˆ·ç«¯ (`api.ts`)
- åˆ†ç¦»å…³æ³¨ç‚¹ï¼šè®¤è¯ã€èŠå¤©ã€é…ç½®ç­‰
- é”™è¯¯å¤„ç†å’Œé‡è¯•æœºåˆ¶

**3. çŠ¶æ€ç®¡ç†**
- Svelte Store è½»é‡çº§çŠ¶æ€ç®¡ç†
- ç±»å‹å®‰å…¨çš„ TypeScript å®šä¹‰
- æŒä¹…åŒ–å­˜å‚¨ï¼ˆlocalStorageï¼‰

**4. å›½é™…åŒ– (i18n)**
- 16ç§è¯­è¨€æ”¯æŒ
- JSON æ ¼å¼ç¿»è¯‘æ–‡ä»¶
- è‡ªåŠ¨è¯­è¨€æ£€æµ‹å’Œåˆ‡æ¢

### æ•°æ®åº“è®¾è®¡

ä½¿ç”¨ SQLite æ•°æ®åº“å­˜å‚¨æ‰€æœ‰æ•°æ®ï¼š

#### æ ¸å¿ƒè¡¨ç»“æ„

**1. ç”¨æˆ·è¡¨ (`users`)**
```sql
- id (ä¸»é”®)
- email (å”¯ä¸€)
- password_hash
- name
- language (ç”¨æˆ·è¯­è¨€åå¥½)
- is_admin
- is_active
- created_at
- updated_at
- last_login_at
```

**2. API Key è¡¨ (`api_keys`)**
```sql
- id (ä¸»é”®)
- key_hash (å”¯ä¸€)
- key_prefix
- encrypted_key (åŠ å¯†å­˜å‚¨)
- name
- email
- user_id (å¤–é”®)
- is_active
- last_used_at
- created_at
- updated_at
```

**3. å¯¹è¯è¡¨ (`conversations`)**
```sql
- id (ä¸»é”®)
- user_id (å¤–é”®)
- title
- provider_name
- api_format
- model
- created_at
- updated_at
```

**4. æ¶ˆæ¯è¡¨ (`conversation_messages`)**
```sql
- id (ä¸»é”®)
- conversation_id (å¤–é”®)
- role (user/assistant/system)
- content
- provider_name
- model
- input_tokens
- output_tokens
- thinking (æ€è€ƒè¿‡ç¨‹)
- created_at
```

**5. è¯·æ±‚æ—¥å¿—è¡¨ (`request_logs`)**
```sql
- id (ä¸»é”®)
- request_id
- provider_name
- model
- request_params
- response_data
- status_code
- error_message
- input_tokens
- output_tokens
- response_time_ms
- created_at
- indexed_at
```

### API è®¾è®¡

#### æ ¸å¿ƒç«¯ç‚¹

**1. æ¶ˆæ¯ API (å…¼å®¹ Anthropic)**
- `POST /v1/messages` - å‘é€æ¶ˆæ¯
- `POST /v1/messages/stream` - æµå¼æ¶ˆæ¯

**2. ä¾›åº”å•†ç®¡ç†**
- `GET /api/providers` - è·å–ä¾›åº”å•†åˆ—è¡¨
- `POST /api/providers` - æ·»åŠ ä¾›åº”å•†
- `PUT /api/providers/{id}` - æ›´æ–°ä¾›åº”å•†
- `DELETE /api/providers/{id}` - åˆ é™¤ä¾›åº”å•†

**3. å¥åº·æ£€æŸ¥**
- `GET /health` - åŸºç¡€å¥åº·æ£€æŸ¥
- `GET /api/health` - è¯¦ç»†å¥åº·ä¿¡æ¯
- `POST /api/health/check` - æ‰‹åŠ¨è§¦å‘æ£€æŸ¥

**4. ç»Ÿè®¡ä¿¡æ¯**
- `GET /api/stats/token-usage` - Token ä½¿ç”¨ç»Ÿè®¡
- `GET /api/stats/requests` - è¯·æ±‚ç»Ÿè®¡
- `GET /api/stats/providers` - ä¾›åº”å•†ç»Ÿè®¡

**5. å¯¹è¯ç®¡ç†**
- `GET /api/conversations` - è·å–å¯¹è¯åˆ—è¡¨
- `POST /api/conversations` - åˆ›å»ºå¯¹è¯
- `GET /api/conversations/{id}` - è·å–å¯¹è¯è¯¦æƒ…
- `DELETE /api/conversations/{id}` - åˆ é™¤å¯¹è¯
- `GET /api/conversations/{id}/messages` - è·å–æ¶ˆæ¯åˆ—è¡¨

## ğŸš€ æ ¸å¿ƒåŠŸèƒ½

### ğŸ”¥ é«˜æ€§èƒ½æ¶æ„

- **å¼‚æ­¥æ•°æ®åº“** - aiosqlite + è¿æ¥æ± ï¼Œæ¶ˆé™¤é˜»å¡ï¼Œæå‡å¹¶å‘èƒ½åŠ› 10-100 å€
- **HTTP è¿æ¥æ± ä¼˜åŒ–** - æ”¯æŒ 10k QPSï¼ŒKeepalive è¿æ¥ä¼˜åŒ–
- **å¤šçº§ç¼“å­˜æ¶æ„** - L1ï¼ˆå†…å­˜ï¼‰+ L2ï¼ˆRedisï¼‰ç¼“å­˜ï¼Œæ˜¾è‘—æå‡å“åº”é€Ÿåº¦

### ğŸ›¡ï¸ ä¼ä¸šçº§å®‰å…¨

- **JWT å¯†é’¥å¼ºåˆ¶ç®¡ç†** - ç”Ÿäº§ç¯å¢ƒå¿…é¡»é…ç½®ï¼Œå¦åˆ™ç”Ÿæˆä¸´æ—¶å¯†é’¥å¹¶è­¦å‘Š
- **åŠ å¯†å¯†é’¥ç®¡ç†** - ENCRYPTION_KEY æ”¯æŒï¼Œæ•æ„Ÿæ•°æ®åŠ å¯†å­˜å‚¨
- **å¼ºå¯†ç ç­–ç•¥** - è‡³å°‘ 12 å­—ç¬¦ï¼Œç®¡ç†å‘˜å¯†ç æ£€æŸ¥

### ğŸŒ å›½é™…åŒ–æ”¯æŒ

- **16ç§è¯­è¨€æ”¯æŒ** - ä¸­æ–‡ã€Englishã€æ—¥æœ¬èªã€í•œêµ­ì–´ã€FranÃ§aisã€EspaÃ±olã€Deutschã€Ğ ÑƒÑÑĞºĞ¸Ğ¹ã€PortuguÃªsã€Italianoã€Nederlandsã€Ø§Ù„Ø¹Ø±Ø¨ÙŠØ©ã€à¤¹à¤¿à¤¨à¥à¤¦à¥€ã€à¹„à¸—à¸¢ã€Tiáº¿ng Viá»‡tã€Bahasa Indonesia
- **æ™ºèƒ½è¯­è¨€åˆ‡æ¢** - è‡ªåŠ¨æ£€æµ‹æµè§ˆå™¨è¯­è¨€ï¼Œæ”¯æŒæ‰‹åŠ¨åˆ‡æ¢
- **å®Œæ•´UIç¿»è¯‘** - æ‰€æœ‰é¡µé¢ã€è¡¨å•ã€æŒ‰é’®ã€æç¤ºä¿¡æ¯å®Œå…¨æœ¬åœ°åŒ–
- **æœ¬åœ°åŒ–å­˜å‚¨** - æ™ºèƒ½è®°å¿†ç”¨æˆ·è¯­è¨€åå¥½

### ğŸŒ ç°ä»£ç®¡ç†ç•Œé¢

- **Svelte 5 + TypeScript** - ç°ä»£åŒ–å‰ç«¯æ¡†æ¶ï¼Œå…¨æ–°å“åº”å¼ç³»ç»Ÿï¼Œç±»å‹å®‰å…¨
- **PWA æ”¯æŒ** - ç¦»çº¿è®¿é—®ã€å®‰è£…åˆ°ä¸»å±å¹•ã€åå°åŒæ­¥
- **æ·±è‰²/æµ…è‰²ä¸»é¢˜** - ç”¨æˆ·ä½“éªŒä¼˜åŒ–
- **ä»£ç åˆ†å‰²** - ä¼˜åŒ–é¦–å±åŠ è½½é€Ÿåº¦
- **èŠå¤©å¯¹è¯é¡µé¢** - å†…ç½®äº¤äº’å¼èŠå¤©ç•Œé¢ï¼Œæ”¯æŒæµå¼è¾“å‡ºå’Œå†å²è®°å½•ï¼Œä¿®å¤æ—¶é—´æˆ³æ˜¾ç¤ºé—®é¢˜

### ğŸ”§ æ™ºèƒ½ç®¡ç†

- **OpenTelemetry é›†æˆ** - åˆ†å¸ƒå¼è¿½è¸ªå’Œç›‘æ§
- **å¥åº·ç›‘æ§** - æ‰‹åŠ¨æ£€æŸ¥æ¨¡å¼ï¼ŒèŠ‚çœ API è°ƒç”¨
- **è‡ªåŠ¨æ•…éšœè½¬ç§»** - ä¼˜å…ˆçº§/éšæœºå›é€€æœºåˆ¶
- **ç†”æ–­å™¨æ¨¡å¼** - å¿«é€Ÿå¤±è´¥é˜²æ­¢çº§è”æ•…éšœ
- **å¹¶è¡Œæµ‹è¯•** - ä½¿ç”¨ pytest-xdist åŠ é€Ÿæµ‹è¯•æ‰§è¡Œï¼ˆ3-4å€æé€Ÿï¼‰

### ğŸ“Š è¿è¥ç›‘æ§

- **æ€§èƒ½ç»Ÿè®¡** - è¯·æ±‚æ—¥å¿—ã€Token ä½¿ç”¨è¿½è¸ª
- **å‹åŠ›æµ‹è¯•** - å†…ç½® 10k QPS å‹åŠ›æµ‹è¯•è„šæœ¬
- **å®æ—¶æ—¥å¿—** - å½©è‰²è¾“å‡ºï¼Œé”™è¯¯è¿½è¸ª
- **å¯è§‚æµ‹æ€§é…ç½®** - è¯·æ±‚é‡‡æ ·ç‡ã€æ…¢è¯·æ±‚è­¦å‘Šé˜ˆå€¼

### ğŸ’¬ å¯¹è¯ç®¡ç†

- **å†å²å¯¹è¯è®°å½•** - SQLite æ•°æ®åº“å­˜å‚¨å¯¹è¯å†å²
- **å¤šå¯¹è¯æ”¯æŒ** - åˆ›å»ºã€æŸ¥çœ‹ã€åˆ é™¤å¤šä¸ªå¯¹è¯
- **Token ç”¨é‡ç»Ÿè®¡** - å®æ—¶è¿½è¸ªè¾“å…¥/è¾“å‡º Token
- **è‡ªåŠ¨æ ‡é¢˜ç”Ÿæˆ** - æå–é¦–æ¡æ¶ˆæ¯è‡ªåŠ¨åˆ›å»ºå¯¹è¯æ ‡é¢˜
- **æ™ºèƒ½æ—¶é—´æˆ³** - ä¿®å¤ "Invalid Date" é—®é¢˜ï¼Œæ”¯æŒå¤šç§æ—¶é—´æ ¼å¼è§£æ

### ğŸ¢ å¤šä¾›åº”å•†æ”¯æŒ

- **ç»Ÿä¸€ API æ¥å£** - æ”¯æŒ Anthropic å…¼å®¹æ ¼å¼
- **ç›´è¿æ¨¡å¼** - æ”¯æŒ Anthropic API æ ¼å¼æä¾›å•†ï¼ˆæ— éœ€è½¬æ¢ï¼‰
- **æ™ºèƒ½æ¨¡å‹æ˜ å°„** - haikuâ†’small, sonnetâ†’middle, opusâ†’big
- **ä¾›åº”å•† Token é™åˆ¶** - æ”¯æŒé…ç½® max_tokens_limit
- **ç»†ç²’åº¦æƒé™æ§åˆ¶** - 9 ä¸ªæƒé™ç‚¹ç²¾ç¡®æ§åˆ¶ï¼Œæ”¯æŒæŒ‰ç”¨æˆ·é…ç½®æƒé™
- **å¤šç§è®¤è¯æ–¹å¼** - é‚®ç®±å¯†ç ç™»å½• + OAuth ç¤¾äº¤ç™»å½•ï¼ˆGitHubã€Googleã€é£ä¹¦ã€Microsoftã€OIDCï¼‰

## ğŸ‰ æœ€æ–°æ›´æ–°

### v1.6.0 (2025-11-29) - å›½é™…åŒ–ä¸ç”¨æˆ·ä½“éªŒå…¨é¢æå‡

#### ğŸŒ å®Œæ•´å›½é™…åŒ–æ”¯æŒ

- **æ–°å¢ 16 ç§è¯­è¨€**ï¼šä¸­æ–‡ã€Englishã€æ—¥æœ¬èªã€í•œêµ­ì–´ã€FranÃ§aisã€EspaÃ±olã€Deutschã€Ğ ÑƒÑÑĞºĞ¸Ğ¹ã€PortuguÃªsã€Italianoã€Nederlandsã€Ø§Ù„Ø¹Ø±Ø¨ÙŠØ©ã€à¤¹à¤¿à¤¨à¥à¤¦à¥€ã€à¹„à¸—à¸¢ã€Tiáº¿ng Viá»‡tã€Bahasa Indonesia
- **æ™ºèƒ½è¯­è¨€åˆ‡æ¢**ï¼šæ”¯æŒé¡¶éƒ¨å¯¼èˆªæ ä¸€é”®åˆ‡æ¢è¯­è¨€ï¼Œè‡ªåŠ¨è®°å¿†ç”¨æˆ·åå¥½
- **å…¨é¢æœ¬åœ°åŒ–**ï¼šæ‰€æœ‰é¡µé¢ã€è¡¨å•ã€æŒ‰é’®ã€æç¤ºä¿¡æ¯ã€Toast æ¶ˆæ¯å®Œæ•´ç¿»è¯‘
- **API Keys é¡µé¢**ï¼šæ–°å¢å®Œæ•´å›½é™…åŒ–æ”¯æŒï¼ŒåŒ…æ‹¬åˆ›å»ºã€ç¼–è¾‘ã€åˆ é™¤ã€æœç´¢ç­‰æ‰€æœ‰æ“ä½œ

#### ğŸ› é—®é¢˜ä¿®å¤

- **ä¿®å¤èŠå¤©æ—¶é—´æˆ³**ï¼šè§£å†³ "Invalid Date" é—®é¢˜ï¼Œæ”¯æŒå¤šç§æ—¶é—´æ ¼å¼ï¼ˆISO 8601ã€SQLite æ—¶é—´æˆ³ç­‰ï¼‰
- **Svelte 5 åˆè§„æ€§**ï¼šå…¨é¢å‡çº§åˆ° Svelte 5 è¯­æ³•ï¼Œä½¿ç”¨ `$state()` å’Œ `$derived()` ç­‰æ–°ç‰¹æ€§
- **å“åº”å¼çŠ¶æ€ç®¡ç†**ï¼šä¿®å¤ API Keys é¡µé¢æ–°å»ºåéœ€è¦åˆ·æ–°æ‰èƒ½æ˜¾ç¤ºçš„é—®é¢˜
- **ä»£ç è´¨é‡æå‡**ï¼šé€šè¿‡ `pnpm run check` å’Œ `pnpm run lint` æ‰€æœ‰æ£€æŸ¥

#### ğŸ“ˆ æŠ€æœ¯æ”¹è¿›

- **æ¨¡å—åŒ–ç¿»è¯‘ç³»ç»Ÿ**ï¼šé›†ä¸­ç®¡ç†çš„ç¿»è¯‘é”®ï¼Œæ˜“äºç»´æŠ¤å’Œæ‰©å±•
- **ä¼˜é›…é™çº§å¤„ç†**ï¼šæ—¶é—´è§£æå¤±è´¥æ—¶è‡ªåŠ¨è¿”å›ç©ºå­—ç¬¦ä¸²ï¼Œä¸æ˜¾ç¤ºé”™è¯¯ä¿¡æ¯
- **æ€§èƒ½ä¼˜åŒ–**ï¼šå“åº”å¼çŠ¶æ€ä¼˜åŒ–ï¼Œå‡å°‘ä¸å¿…è¦çš„é‡æ–°æ¸²æŸ“

## ğŸƒâ€â™‚ï¸ å¿«é€Ÿå¼€å§‹

### ç¯å¢ƒè¦æ±‚

- **Python 3.9+** (æ¨è 3.10+)
- **Node.js 18+** (æ¨è 20+)
- **npm/pnpm/yarn** (æ¨è pnpm)
- **Docker & Docker Compose** (å¯é€‰ï¼Œç”¨äºå®¹å™¨åŒ–éƒ¨ç½²)

### ğŸš€ ä¸€é”®éƒ¨ç½²ï¼ˆæ¨èï¼‰

#### Docker Compose æ–¹å¼

```bash
# å…‹éš†é¡¹ç›®
git clone https://github.com/MichaelHuang7119/anthropic-openai-bridge.git
cd anthropic-openai-bridge

# å¯åŠ¨æ‰€æœ‰æœåŠ¡ï¼ˆåç«¯ + å‰ç«¯ï¼‰
docker-compose up -d

# æŸ¥çœ‹æœåŠ¡çŠ¶æ€
docker-compose ps

# æŸ¥çœ‹æ—¥å¿—
docker-compose logs -f frontend
docker-compose logs -f backend
```

æœåŠ¡å¯åŠ¨åï¼š

- **å‰ç«¯ç®¡ç†ç•Œé¢**: http://localhost:5173
- **API æ–‡æ¡£**: http://localhost:8000/docs

#### è‡ªå®šä¹‰å‰ç«¯ç«¯å£

```bash
EXPOSE_PORT=5175 docker-compose up -d
```

#### æœ¬åœ°å¼€å‘æ–¹å¼

**1. å¯åŠ¨åç«¯æœåŠ¡**

```bash
cd backend
bash start.sh  # å¦‚æœéœ€ä¿æŒçƒ­é‡è½½ï¼Œå¯æŒ‡å®šä¸º"å¼€å‘æ¨¡å¼"ï¼Œå³ï¼šbash start.sh --dev
```

**2. å¯åŠ¨å‰ç«¯æœåŠ¡ï¼ˆæ–°ç»ˆç«¯ï¼‰**

```bash
cd frontend
# bash å¯åŠ¨
bash start.sh  # å¦‚æœéœ€ä¿æŒçƒ­é‡è½½ï¼Œå¯æŒ‡å®šä¸º"å¼€å‘æ¨¡å¼"ï¼Œå³ï¼šbash start.sh --dev
# npm/pnpmå¯åŠ¨ï¼ˆå¯æŒ‡å®šç«¯å£ï¼‰
pnpm install  # or: npm install, é¦–æ¬¡è¿è¡Œéœ€è¦å®‰è£…ä¾èµ–
pnpm dev -- --port 5173  # or: npm dev -- --port 5173
```

### ğŸ”‘ é¦–æ¬¡ç™»å½•

1. è®¿é—®å‰ç«¯ç®¡ç†ç•Œé¢ï¼šhttp://localhost:5173
2. ç³»ç»Ÿä¼šè‡ªåŠ¨è·³è½¬åˆ°ç™»å½•é¡µé¢
3. ä½¿ç”¨é»˜è®¤ç®¡ç†å‘˜è´¦å·ç™»å½•ï¼š
   - **é‚®ç®±**ï¼š`admin@example.com`
   - **å¯†ç **ï¼š`admin123`

> **é‡è¦**ï¼šé¦–æ¬¡ç™»å½•åè¯·ç«‹å³ä¿®æ”¹å¯†ç ï¼ç”Ÿäº§ç¯å¢ƒéœ€è¦è®¾ç½®å¼ºå¯†ç ã€‚

### âš™ï¸ é…ç½®å¿…éœ€ç¯å¢ƒå˜é‡

**ç”Ÿäº§ç¯å¢ƒè¯·è®¾ç½®ä»¥ä¸‹ç¯å¢ƒå˜é‡ï¼Œä»¥ä¿è¯æ•°æ®å®‰å…¨å’Œæ”¯æŒæ›´å¤šçš„é…ç½®**ï¼š

```bash
# å¿…éœ€ - JWT å¯†é’¥
export JWT_SECRET_KEY="your-strong-secret-key-here"

# æ¨è - åŠ å¯†å¯†é’¥ï¼ˆç”¨äºæ•æ„Ÿæ•°æ®åŠ å¯†ï¼‰
export ENCRYPTION_KEY="your-fernet-encryption-key-here"

# æ¨è - ç®¡ç†å‘˜å¯†ç ï¼ˆè‡³å°‘ 12 å­—ç¬¦ï¼‰
export ADMIN_PASSWORD="your-secure-password"

# æ€§èƒ½ä¼˜åŒ– - æ•°æ®åº“è¿æ¥æ± 
export DB_POOL_SIZE=20
export DB_POOL_TIMEOUT=30.0

# æ€§èƒ½ä¼˜åŒ– - HTTP è¿æ¥æ± 
export HTTP_MAX_KEEPALIVE_CONNECTIONS=100
export HTTP_MAX_CONNECTIONS=500
export HTTP_KEEPALIVE_EXPIRY=60

# æ€§èƒ½ä¼˜åŒ– - ç¼“å­˜é…ç½®
export CACHE_TYPE=multi
export CACHE_MULTI_LEVEL=true
export REDIS_URL=redis://localhost:6379/0
export CACHE_MAX_SIZE=1000
export CACHE_DEFAULT_TTL=3600

# å¯é€‰ - ç›‘æ§é…ç½®
export ENABLE_TELEMETRY=true
export OTLP_ENDPOINT=http://jaeger:4318
export SERVICE_VERSION=1.0.0
```

## ğŸ”§ å¼€å‘æŒ‡å—

### ç¯å¢ƒæ­å»º

**1. å…‹éš†é¡¹ç›®**

```bash
git clone https://github.com/MichaelHuang7119/anthropic-openai-bridge.git
cd anthropic-openai-bridge
```

**2. åç«¯å¼€å‘ç¯å¢ƒ**

```bash
cd backend

# åˆ›å»ºè™šæ‹Ÿç¯å¢ƒ
python3 -m venv venv
source venv/bin/activate  # Linux/Mac
# æˆ– venv\Scripts\activate  # Windows

# å®‰è£…ä¾èµ–
pip install -e .

# è®¾ç½®ç¯å¢ƒå˜é‡
cp .env.example .env
# ç¼–è¾‘ .env æ–‡ä»¶ï¼Œé…ç½®å¿…è¦çš„ç¯å¢ƒå˜é‡
```

**3. å‰ç«¯å¼€å‘ç¯å¢ƒ**

```bash
cd frontend

# å®‰è£… pnpmï¼ˆå¦‚æœæœªå®‰è£…ï¼‰
npm install -g pnpm

# å®‰è£…ä¾èµ–
pnpm install

# å¯åŠ¨å¼€å‘æœåŠ¡å™¨
pnpm dev
```

### ä»£ç è§„èŒƒ

**åç«¯ (Python)**
- ä½¿ç”¨ `black` æ ¼å¼åŒ–ä»£ç 
- ä½¿ç”¨ `isort` æ’åºå¯¼å…¥
- ä½¿ç”¨ `pylint` è¿›è¡Œé™æ€åˆ†æ
- ä½¿ç”¨ `pytest` è¿›è¡Œå•å…ƒæµ‹è¯•

```bash
# æ ¼å¼åŒ–ä»£ç 
black .
isort .

# è¿è¡Œæµ‹è¯•
pytest

# è¿è¡Œæµ‹è¯•ï¼ˆå¹¶è¡Œï¼‰
pytest -n auto

# ä»£ç è¦†ç›–ç‡
pytest --cov=app --cov-report=html
```

**å‰ç«¯ (TypeScript/Svelte)**
- ä½¿ç”¨ `eslint` è¿›è¡Œä»£ç æ£€æŸ¥
- ä½¿ç”¨ `prettier` æ ¼å¼åŒ–ä»£ç 
- ä½¿ç”¨ `svelte-check` è¿›è¡Œç±»å‹æ£€æŸ¥
- éµå¾ª Svelte 5 æœ€æ–°è¯­æ³•è§„èŒƒ

```bash
# ç±»å‹æ£€æŸ¥
pnpm run check

# ä»£ç æ£€æŸ¥
pnpm run lint

# ä¿®å¤ä»£ç é£æ ¼
pnpm run lint -- --write

# æ„å»ºç”Ÿäº§ç‰ˆæœ¬
pnpm run build

# é¢„è§ˆæ„å»ºç»“æœ
pnpm run preview
```

### é¡¹ç›®ç»“æ„è¯´æ˜

**è¯·æ±‚æµç¨‹**

```
å®¢æˆ·ç«¯è¯·æ±‚
  â†“
API è·¯ç”± (/routes/messages.py, /routes/*.py)
  â†“
æ¶ˆæ¯æœåŠ¡ (message_service.py)
  â†“
è½¬æ¢å™¨ (converters/)
  â†“
ä¾›åº”å•†å¤„ç†å™¨ (services/handlers/)
  â†“
ä¾›åº”å•†å®¢æˆ·ç«¯ (infrastructure/clients/)
  â†“
åç«¯ AI ä¾›åº”å•† (OpenAI/Anthropic æ ¼å¼)
  â†“
å“åº”è½¬æ¢
  â†“
å®¢æˆ·ç«¯
```

**åç«¯æ ¸å¿ƒæµç¨‹**

```
ç”¨æˆ·è¯·æ±‚
  â”‚
  â–¼
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚   API è·¯ç”±å±‚      â”‚  â† éªŒè¯è¯·æ±‚å‚æ•°ã€JWT è®¤è¯
â””â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
       â”‚
       â–¼
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚    æœåŠ¡å±‚         â”‚  â† ä¸šåŠ¡é€»è¾‘å¤„ç†
â”‚  - æ¶ˆæ¯æœåŠ¡       â”‚
â”‚  - ä¾›åº”å•†æœåŠ¡     â”‚
â”‚  - å¥åº·æ£€æŸ¥æœåŠ¡   â”‚
â””â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
       â”‚
       â–¼
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚    è½¬æ¢å±‚         â”‚  â† Anthropic â†” OpenAI æ ¼å¼è½¬æ¢
â””â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
       â”‚
       â–¼
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚   ä¾›åº”å•† API      â”‚  â† å®é™…è°ƒç”¨åç«¯ AI æœåŠ¡
â””â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
       â”‚
       â–¼
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚   å“åº”è½¬æ¢        â”‚  â† è½¬æ¢å“åº”æ ¼å¼
â””â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
       â”‚
       â–¼
    è¿”å›ç”¨æˆ·
```

**å‰ç«¯çŠ¶æ€æµ**

```
ç”¨æˆ·æ“ä½œ
  â”‚
  â–¼
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚   Svelte ç»„ä»¶     â”‚  â† è§¦å‘äº‹ä»¶
â””â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
       â”‚
       â–¼
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚    Stores        â”‚  â† çŠ¶æ€ç®¡ç†
â”‚  - writable      â”‚
â”‚  - derived       â”‚
â””â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
       â”‚
       â–¼
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚   Services       â”‚  â† API è°ƒç”¨
â”‚  - api.ts        â”‚
â”‚  - auth.ts       â”‚
â””â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
       â”‚
       â–¼
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚  åç«¯ API        â”‚  â† æ•°æ®æŒä¹…åŒ–
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

### è°ƒè¯•æŒ‡å—

**åç«¯è°ƒè¯•**

1. å¯ç”¨è°ƒè¯•æ—¥å¿—
```bash
export LOG_LEVEL=DEBUG
```

2. ä½¿ç”¨ PyCharm/VSCode è°ƒè¯•
```bash
# åœ¨ VSCode ä¸­è®¾ç½®æ–­ç‚¹ï¼Œç„¶åï¼š
python -m debugpy --listen 5678 --wait-for-child -m uvicorn app.main:app --reload
```

3. æ•°æ®åº“è°ƒè¯•
```bash
# æŸ¥çœ‹æ•°æ®åº“å†…å®¹
sqlite3 backend/data/app.db
.tables
SELECT * FROM users;
```

**å‰ç«¯è°ƒè¯•**

1. æµè§ˆå™¨å¼€å‘è€…å·¥å…·
```javascript
// åœ¨æ§åˆ¶å°ä¸­æŸ¥çœ‹stores
import { get } from 'svelte/store';
import { authService } from '$services/auth';
console.log(get(authService));
```

2. Svelte DevTools
```bash
# å®‰è£…æµè§ˆå™¨æ‰©å±•
# https://github.com/sveltejs/svelte-devtools
```

3. ç½‘ç»œè¯·æ±‚è°ƒè¯•
```bash
# å¯ç”¨è¯¦ç»†æ—¥å¿—
localStorage.setItem('debug', 'http');
```

### æ·»åŠ æ–°åŠŸèƒ½

**1. æ·»åŠ æ–°çš„ API ç«¯ç‚¹**

åˆ›å»ºæ–‡ä»¶ï¼š`backend/app/api/example.py`

```python
from fastapi import APIRouter, HTTPException

router = APIRouter(prefix="/api/example", tags=["example"])

@router.get("/")
async def get_example():
    return {"message": "Hello"}
```

åœ¨ `main.py` ä¸­æ³¨å†Œï¼š
```python
from .api.example import router as example_router
app.include_router(example_router)
```

**2. æ·»åŠ æ–°çš„å‰ç«¯é¡µé¢**

åˆ›å»ºæ–‡ä»¶ï¼š`frontend/src/routes/example/+page.svelte`

```svelte
<script lang="ts">
  let message = "Hello";
</script>

<h1>{message}</h1>
```

**3. æ·»åŠ æ–°çš„æ•°æ®åº“è¡¨**

åœ¨ `backend/app/database/core.py` çš„ `init_database()` æ–¹æ³•ä¸­æ·»åŠ ï¼š

```python
await cursor.execute("""
    CREATE TABLE IF NOT EXISTS example (
        id INTEGER PRIMARY KEY AUTOINCREMENT,
        name TEXT NOT NULL,
        created_at TIMESTAMP DEFAULT CURRENT_TIMESTAMP
    )
""")
```

## ğŸ“¦ éƒ¨ç½²

### Docker éƒ¨ç½²ï¼ˆæ¨èï¼‰

**ç”Ÿäº§ç¯å¢ƒ**

```bash
# æ„å»ºé•œåƒ
docker-compose build

# å¯åŠ¨æœåŠ¡
docker-compose up -d

# æŸ¥çœ‹æ—¥å¿—
docker-compose logs -f
```

**è‡ªå®šä¹‰é…ç½®**

åˆ›å»º `.env.prod` æ–‡ä»¶ï¼š

```bash
# ç”Ÿäº§ç¯å¢ƒé…ç½®
JWT_SECRET_KEY=your-production-secret-key
ENCRYPTION_KEY=your-encryption-key
ADMIN_PASSWORD=your-secure-password

# æ•°æ®åº“é…ç½®
DATABASE_PATH=/data/app.db

# æ€§èƒ½é…ç½®
DB_POOL_SIZE=50
HTTP_MAX_CONNECTIONS=1000

# æ—¥å¿—é…ç½®
LOG_LEVEL=INFO
```

ç„¶åå¯åŠ¨ï¼š

```bash
docker-compose --env-file .env.prod up -d
```

### Kubernetes éƒ¨ç½²

```bash
# éƒ¨ç½²åˆ° K8s
kubectl apply -f k8s/
```

### æ‰‹åŠ¨éƒ¨ç½²

**1. åç«¯éƒ¨ç½²**

```bash
cd backend
source venv/bin/activate

# ç”Ÿäº§ç¯å¢ƒå®‰è£…
pip install -e . --prod

# ä½¿ç”¨ gunicorn å¯åŠ¨
gunicorn app.main:app -w 4 -k uvicorn.workers.UvicornWorker
```

**2. å‰ç«¯éƒ¨ç½²**

```bash
cd frontend
pnpm install
pnpm build

# å°† build/ ç›®å½•éƒ¨ç½²åˆ° Nginx
cp -r build/* /var/www/html/
```

## ğŸ¤ è´¡çŒ®æŒ‡å—

æˆ‘ä»¬æ¬¢è¿æ‰€æœ‰å½¢å¼çš„è´¡çŒ®ï¼

### å¦‚ä½•è´¡çŒ®

1. **Fork** é¡¹ç›®
2. åˆ›å»ºåŠŸèƒ½åˆ†æ”¯ï¼š`git checkout -b feature/your-feature`
3. æäº¤æ›´æ”¹ï¼š`git commit -am 'Add some feature'`
4. æ¨é€åˆ†æ”¯ï¼š`git push origin feature/your-feature`
5. æäº¤ **Pull Request**

### è´¡çŒ®è§„èŒƒ

**ä»£ç é£æ ¼**
- åç«¯ï¼šéµå¾ª PEP 8 è§„èŒƒ
- å‰ç«¯ï¼šéµå¾ªé¡¹ç›® ESLint é…ç½®
- æäº¤ä¿¡æ¯ï¼šä½¿ç”¨çº¦å®šå¼æäº¤æ ¼å¼

```bash
# ç¤ºä¾‹æäº¤ä¿¡æ¯
feat(api): add new endpoint for statistics
fix(frontend): resolve chat timestamp issue
docs(readme): update deployment guide
```

**æäº¤ç±»å‹**
- `feat`: æ–°åŠŸèƒ½
- `fix`: é”™è¯¯ä¿®å¤
- `docs`: æ–‡æ¡£æ›´æ–°
- `style`: ä»£ç æ ¼å¼
- `refactor`: é‡æ„
- `test`: æµ‹è¯•
- `chore`: æ„å»ºè¿‡ç¨‹æˆ–è¾…åŠ©å·¥å…·

**Pull Request è¦æ±‚**
- [ ] ä»£ç é€šè¿‡æ‰€æœ‰æµ‹è¯•
- [ ] é€šè¿‡ ESLint/Prettier æ£€æŸ¥
- [ ] æ·»åŠ å¿…è¦çš„å•å…ƒæµ‹è¯•
- [ ] æ›´æ–°ç›¸å…³æ–‡æ¡£
- [ ] ä½¿ç”¨è‹±æ–‡æ’°å†™ PR æè¿°

### æŠ¥å‘Šé—®é¢˜

è¯·ä½¿ç”¨ [GitHub Issues](https://github.com/michaelhuang7119/anthropic-openai-bridge/issues) æŠ¥å‘Šé—®é¢˜ã€‚

**Bug æŠ¥å‘Šæ¨¡æ¿**ï¼š

```markdown
## ğŸ› Bug æè¿°
æ¸…æ™°ç®€æ´åœ°æè¿°è¿™ä¸ªbugã€‚

## ğŸ”„ å¤ç°æ­¥éª¤
1. æ‰“å¼€...
2. ç‚¹å‡»...
3. æ»šåŠ¨åˆ°...
4. çœ‹åˆ°é”™è¯¯

## âœ… é¢„æœŸè¡Œä¸º
æ¸…æ™°ç®€æ´åœ°æè¿°ä½ é¢„æœŸä¼šå‘ç”Ÿä»€ä¹ˆã€‚

## ğŸ“¸ æˆªå›¾
å¦‚æœé€‚ç”¨ï¼Œæ·»åŠ æˆªå›¾ã€‚

## ğŸ–¥ï¸ ç¯å¢ƒä¿¡æ¯
- OS: [e.g. Ubuntu 20.04]
- Browser: [e.g. Chrome 91]
- Python: [e.g. 3.11.0]
- Node.js: [e.g. 18.0.0]
```

### åŠŸèƒ½è¯·æ±‚

```markdown
## ğŸš€ åŠŸèƒ½æè¿°
æ¸…æ™°ç®€æ´åœ°æè¿°ä½ æƒ³è¦çš„åŠŸèƒ½ã€‚

## ğŸ’¡ è¯¦ç»†è¯´æ˜
è¯¦ç»†æè¿°è¿™ä¸ªåŠŸèƒ½çš„å®ç°æ–¹æ¡ˆã€‚

## ğŸ¯ ä½¿ç”¨åœºæ™¯
æè¿°è¿™ä¸ªåŠŸèƒ½çš„ä½¿ç”¨åœºæ™¯ã€‚
```

